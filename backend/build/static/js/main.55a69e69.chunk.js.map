{"version":3,"sources":["components/InputField.js","components/Form.js","components/Person.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["InputField","htmlFor","label","type","value","onChange","className","id","Form","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","Person","person","handleDelete","name","number","onClick","Persons","filter","persons","filteredPersons","map","key","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","App","useState","setPersons","setNewName","setNewNumber","setFilter","setFilteredPersons","notificationMessage","setNotificationMessage","useEffect","personService","initialPersons","notification","error","event","target","filtered","toLowerCase","includes","preventDefault","newPerson","alreadyExists","some","find","p","changedPerson","setTimeout","window","confirm","returnedPerson","catch","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.55a69e69.chunk.js","sourcesContent":["import React from \"react\";\n\nconst InputField = ({ htmlFor, label, type, value, onChange }) => (\n  <div>\n    {/* Add label with htmlFor for accessibility, id on input associates label with input element */}\n    <label className=\"label\" htmlFor={htmlFor}>\n      {label}\n    </label>\n    <input\n      type={type}\n      className=\"input\"\n      id={htmlFor}\n      value={value}\n      onChange={onChange}\n    />\n  </div>\n);\n\nexport default InputField;","\nimport React from \"react\";\nimport InputField from \"./InputField\";\n\nconst Form = ({\n  onSubmit,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange\n}) => (\n  <form onSubmit={onSubmit}>\n    <InputField\n      label=\"Name:\"\n      htmlFor=\"name\"\n      type=\"text\"\n      value={newName}\n      onChange={handleNameChange}\n    />\n\n    <InputField\n      label=\"Number:\"\n      htmlFor=\"number\"\n      value={newNumber}\n      onChange={handleNumberChange}\n    />\n    <div>\n      <button className=\"button submit\" type=\"submit\">\n        Add\n      </button>\n    </div>\n  </form>\n);\n\nexport default Form;","import React from \"react\";\n\nconst Person = ({ person, handleDelete }) => (\n  <div className=\"person\">\n    <span className=\"person--name\">{person.name}</span>\n    <span className=\"person--number\">{person.number}</span>\n    <button className=\"button\" onClick={() => handleDelete(person.id)}>\n      Delete\n    </button>\n  </div>\n);\n\nexport default Person;","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ filter, persons, filteredPersons, handleDelete }) => (\n  <div className=\"persons\">\n    {filter === \"\"\n      ? persons?.map(person => (\n          <Person\n            key={person.name}\n            person={person}\n            handleDelete={handleDelete}\n          />\n        ))\n      : filteredPersons?.map(person => (\n          <Person\n            key={person.name}\n            person={person}\n            handleDelete={handleDelete}\n          />\n        ))}\n  </div>\n);\n\nexport default Persons;","\nimport axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject);\n  return request.then(response => response.data);\n};\n\nconst deletePerson = id => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  return request.then(response => response.data);\n};\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  return request.then(response => response.data);\n};\n\nexport default { getAll, create, deletePerson, update };","import React from \"react\";\n\nconst Notification = ({ message, className }) => {\n  // Check for null or undefined with == instead of ===\n  if (message == null) {\n    return null;\n  }\n\n  return <div className={className}>{message}</div>;\n};\n\nexport default Notification;","import React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport InputField from \"./components/InputField\";\nimport Form from \"./components/Form\";\nimport Persons from \"./components/Persons\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filter, setFilter] = useState(\"\");\n  const [filteredPersons, setFilteredPersons] = useState(null);\n  const [notificationMessage, setNotificationMessage] = useState(null);\n\n  // Fetch person data from json-server\n  useEffect(() => {\n    personService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilter = (event) => {\n    setFilter(event.target.value);\n    const filtered = persons.filter((person) =>\n      // Check if the search term is included in the names in the phonebook\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\n    );\n\n    setFilteredPersons(filtered);\n  };\n\n  // submit form\n  const addPerson = (event) => {\n    event.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    };\n\n    // Check if person is already added to the phoneboook.\n    const alreadyExists = persons.some((person) => person.name === newName);\n\n    // No name provided --> could be handled by displaying an error\n    // For now do nothing.\n    if (newName === \"\") {\n      return;\n    }\n\n    if (alreadyExists) {\n      const person = persons.find((p) => p.name === newName);\n      const changedPerson = { ...person, number: newNumber };\n      const { id } = person;\n\n      // Error handling for if the updated number is too short.\n      if (newNumber < 8) {\n        setNotificationMessage({\n          error: `${newNumber} is too short, please provide a number with at least 8 digits`,\n        });\n        setTimeout(() => {\n          setNotificationMessage(null);\n        }, 5000);\n        return;\n      }\n\n      const confirmUpdate = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n\n      if (confirmUpdate) {\n        personService\n          .update(id, changedPerson)\n          .then((returnedPerson) => {\n            // Update number in state\n            setPersons(\n              persons.map((person) =>\n                person.id !== id ? person : returnedPerson\n              )\n            );\n\n            setNotificationMessage({\n              notification: `Updated number for ${person.name}`,\n            });\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n          })\n          .catch((error) => {\n            setNotificationMessage({\n              error: `Information for ${person.name} has already been removed from server`,\n            });\n            setPersons(persons.filter((p) => p.id !== id));\n            setTimeout(() => {\n              setNotificationMessage(null);\n            }, 5000);\n          });\n      }\n      // clear input fields\n      setNewName(\"\");\n      setNewNumber(\"\");\n      return;\n    }\n\n    personService\n      .create(newPerson)\n      .then((returnedPerson) => {\n        setPersons(persons.concat(returnedPerson));\n\n        setNotificationMessage({\n          notification: `Added ${returnedPerson.name}`,\n        });\n        setTimeout(() => {\n          setNotificationMessage(null);\n        }, 5000);\n\n        // clear input fields\n        setNewName(\"\");\n        setNewNumber(\"\");\n      })\n      .catch((error) => {\n        setNotificationMessage(error.response.data);\n        setTimeout(() => {\n          setNotificationMessage(null);\n        }, 5000);\n      });\n  };\n\n  const handleDelete = (id) => {\n    const person = persons.find((p) => p.id === id);\n    const confirmDelete = window.confirm(`Delete ${person.name}?`);\n    if (confirmDelete) {\n      personService.deletePerson(id).then(() => {\n        //Update state --> filter out deleted person\n        const filteredPersons = persons.filter((person) => person.id !== id);\n        setPersons(filteredPersons);\n\n        // reset filter\n        setFilter(\"\");\n      });\n    }\n  };\n\n  return (\n    <main className=\"container\">\n      <h1>Phonebook</h1>\n      <Notification\n        message={\n          notificationMessage?.notification || notificationMessage?.error\n        }\n        className={notificationMessage?.notification ? \"notification\" : \"error\"}\n      />\n\n      {/* Filter by name */}\n      <InputField\n        label=\"Filter shown with\"\n        htmlFor=\"filter\"\n        type=\"text\"\n        value={filter}\n        onChange={handleFilter}\n      />\n\n      <h2>Add a new</h2>\n      <Form\n        onSubmit={addPerson}\n        newName={newName}\n        handleNameChange={handleNameChange}\n        newNumber={newNumber}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        filter={filter}\n        persons={persons}\n        filteredPersons={filteredPersons}\n        handleDelete={handleDelete}\n      />\n    </main>\n  );\n};\n\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}